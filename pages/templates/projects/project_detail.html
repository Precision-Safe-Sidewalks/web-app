{% extends "base.html" %}
{% load project_tags %}

{% block content %}
<h2>{{ project.name }}</h2>
<h6 class="mt-2">
  <a href="{% url 'customer-detail' pk=project.customer.pk %}">
    {{ project.customer.name }}
  </a>
  &#8212; {{ project.territory.name }} ({{ project.territory.label }})
</h6>

<div class="mt-16">
  <h4>Documents</h4>
  <table class="table mt-2">
    <thead>
      <tr>
        <th>Name</th>
        <th align="center">Status</th>
        <th align="center">Last Edit At</th>
        <th align="center">Last Edit By</th>
        <th align="center">Actions</th>
      </tr>
    </thead>
    <tbody>
      <!-- Survey measurements -->
      {% with exists=project.has_survey_measurements %}
      <tr>
        <td>Survey measurements</td>
        <td align="center">{{ exists|status_icon }}</td>
        <td align="center">---</td>
        <td align="center">---</td>
        <td align="center">
          <div class="flex--center">
            <a href="{% url 'project-measurements-import' pk=project.pk stage='survey' %}" class="btn--icon-sm">
              <span class="icon">upload_file</span>
            </a>
            {% if exists %}
            <a href="{% url 'project-measurements-export' pk=project.pk stage='survey' %}" class="btn--icon-sm ml-1">
              <span class="icon">download</span>
            </a>
            {% endif %}
          </div>
        </td>
      </tr>
      {% endwith %}

      <!-- Survey instructions -->
      {% with exists=project.has_survey_instructions %}
      <tr>
        <td>Survey instructions</td>
        <td align="center">{{ exists|status_icon }}</td>
        <td align="center">---</td>
        <td align="center">---</td>
        <td>
          <div class="flex--center">
            <a href="{% url 'project-si' pk=project.pk %}" class="btn--icon-sm">
              <span class="icon">edit</span>
            </a>
            {% if exists %}
            <a href="#" class="btn--icon-sm ml-1">
              <span class="icon">download</span>
            </a>
            {% endif %}
          </div>
        </td>
      </tr>
      {% endwith %}

      <!-- Pricing sheet -->
      <tr>
        <td>Pricing sheet</td>
        <td align="center">{{ project.has_pricing_sheet|status_icon }}</td>
        <td align="center">---</td>
        <td align="center">---</td>
        <td></td>
      </tr>
      <tr>

      <!-- Production measurements -->
      {% with exists=project.has_production_measurements %}
      <tr>
        <td>Production measurements</td>
        <td align="center">{{ exists|status_icon }}</td>
        <td align="center">---</td>
        <td align="center">---</td>
        <td>
          <div class="flex--center">
            <a href="{% url 'project-measurements-import' pk=project.pk stage='production' %}" class="btn--icon-sm">
              <span class="icon">upload_file</span>
            </a>
            {% if exists %}
            <a href="{% url 'project-measurements-export' pk=project.pk stage='production' %}" class="btn--icon-sm ml-1">
              <span class="icon">download</span>
            </a>
            {% endif %}
          </div>
        </td>
      </tr>
      {% endwith %}

      <!-- Project instructions -->
      {% with exists=project.has_project_instructions %}
      <tr>
        <td>Project instructions</td>
        <td align="center">{{ exists|status_icon }}</td>
        <td align="center">---</td>
        <td align="center">---</td>
        <td>
          <div class="flex--center">
            <a href="{% url 'project-pi' pk=project.pk %}" class="btn--icon-sm">
              <span class="icon">edit</span>
            </a>
            {% if exists %}
            <a href="#" class="btn--icon-sm ml-1">
              <span class="icon">download</span>
            </a>
            {% endif %}
          </div>
        </td>
      </tr>
      {% endwith %}

      <!-- Project summary -->
      {% with exists=projext.has_project_summary %}
      <tr>
        <td>Project summary</td>
        <td align="center">{{ exists|status_icon }}</td>
        <td align="center">---</td>
        <td align="center">---</td>
        <td>
          <div class="flex--center">
            {% if exists %}
            <a href="#" class="btn--icon-sm ml-1">
              <span class="icon">download</span>
            </a>
            {% endif %}
          </div>
        </td>
      </tr>
      {% endwith %}

      <!-- Post-project review -->
      {% with exists=project.has_post_project_review %}
      <tr>
        <td>Post-project review</td>
        <td align="center">{{ exists|status_icon }}</td>
        <td align="center">---</td>
        <td align="center">---</td>
        <td>
          <div class="flex--center">
            {% if exists %}
            <a href="#" class="btn--icon-sm ml-1">
              <span class="icon">download</span>
            </a>
            {% endif %}
          </div>
        </td>
      </tr>
      {% endwith %}

    </tbody>
  </table>
</div>

{% endblock %}
